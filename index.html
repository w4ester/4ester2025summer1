<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top Family Trips â€“ Vote & Plan</title>

  <!-- ===========  STYLES  =========== -->
  <style>
    /* --- Base --- */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,Helvetica,sans-serif;background:#111;color:#fff;line-height:1.6}
    h1{text-align:center;padding:24px;font-size:clamp(1.6rem,4vw,2.6rem)}
    a{color:#4fc3f7;text-decoration:none}
    a:hover{text-decoration:underline}

    /* --- Slideshow --- */
    .slideshow-container{position:relative;max-width:1000px;margin:0 auto 48px;
                          border-radius:20px;overflow:hidden;
                          box-shadow:0 10px 25px rgba(0,0,0,.45)}
    .slide{display:none;position:relative}
    .slide img{width:100%;height:520px;object-fit:cover}
    .slide-content{position:absolute;bottom:0;left:0;width:100%;
                   background:rgba(0,0,0,.62);padding:22px}
    .slide-content h2{font-size:1.6rem;margin-bottom:6px}
    .nav-btn{cursor:pointer;position:absolute;top:50%;transform:translateY(-50%);
             padding:16px;font-size:24px;font-weight:bold;color:#fff;
             background:rgba(0,0,0,.45);border-radius:6px}
    .nav-btn:hover{background:rgba(0,0,0,.8)}
    .prev{left:12px}.next{right:12px}
    .dot-container{text-align:center;padding:16px 0;background:#222}
    .dot{height:14px;width:14px;margin:0 4px;border-radius:50%;background:#bbb;
         display:inline-block;cursor:pointer}
    .active,.dot:hover{background:#717171}
    @keyframes fade{from{opacity:.4}to{opacity:1}}
    .fade{animation:fade 1s}
    @media(max-width:650px){
      .slide img{height:340px}
      .slide-content h2{font-size:1.4rem}
    }

    /* --- Itineraries --- */
    section.itin{max-width:1000px;margin:0 auto 60px;padding:30px 24px;
                 background:#222;border-radius:16px;
                 box-shadow:0 4px 16px rgba(0,0,0,.4)}
    section.itin h2{text-align:center;color:#4fc3f7;font-size:1.75rem;margin-bottom:18px}
    section.itin h3{margin:18px 0 10px;font-size:1.3rem;color:#fbbf24}
    ol{margin-left:20px}
    li{margin-bottom:6px}

    /* --- Poll overlay --- */
    .poll{display:none;position:fixed;top:0;left:0;width:100%;height:100%;
          background:rgba(0,0,0,.95);padding:32px 20px;overflow:auto;z-index:1000}
    .poll.active{display:block}
    .poll h2{text-align:center;margin-bottom:18px;font-size:1.8rem;color:#4fc3f7}
    .poll form{max-width:500px;margin:0 auto;font-size:1.1rem}
    .poll label{display:block;margin-bottom:10px}
    .poll button{margin-top:16px;padding:10px 18px;border:none;border-radius:6px;
                 background:#4fc3f7;color:#000;font-weight:bold;cursor:pointer}
    .poll button:hover{background:#38bdf8}
    #resultList li{margin-bottom:6px}
  </style>
</head>
<body>

<h1>Family-Approved Trips &nbsp;|&nbsp; Click-to-Plan Schedules</h1>
<p style="text-align:center;margin-bottom:16px">
  <a href="#" onclick="openPoll();return false;">ðŸ“Š Cast Your Vote for the Best Trip</a>
</p>

<!-- ===========  SLIDESHOW  =========== -->
<div class="slideshow-container">
  <div class="slide fade">
    <img src="clearwater.jpg" alt="Clearwater Beach" />
    <div class="slide-content">
      <h2>Clearwater Beach, Florida</h2>
      <p>#1 Tripadvisor US Beach  Â·  5-night â‰ˆ $3,187</p>
      <p><a href="#cw">Jump to Itinerary â†—</a></p>
    </div>
  </div>

  <div class="slide fade">
    <img src="outerbanks.jpg" alt="Outer Banks dunes" />
    <div class="slide-content">
      <h2>Outer Banks, North Carolina</h2>
      <p>Wild beaches &amp; lighthouses  Â·  5-night â‰ˆ $2,400</p>
      <p><a href="#obx">Jump to Itinerary â†—</a></p>
    </div>
  </div>

  <div class="slide fade">
    <img src="smokies.jpg" alt="Great Smoky Mountains" />
    <div class="slide-content">
      <h2>Great Smoky Mountains, Tennessee</h2>
      <p>Americaâ€™s most-visited NP  Â·  5-night â‰ˆ $2,260</p>
      <p><a href="#gsm">Jump to Itinerary â†—</a></p>
    </div>
  </div>

  <span class="nav-btn prev" onclick="plusSlides(-1)">&#10094;</span>
  <span class="nav-btn next" onclick="plusSlides(1)">&#10095;</span>
</div>
<div class="dot-container">
  <span class="dot" onclick="currentSlide(1)"></span>
  <span class="dot" onclick="currentSlide(2)"></span>
  <span class="dot" onclick="currentSlide(3)"></span>
</div>

<!-- ===========  CLEARWATER  =========== -->
<section id="cw" class="itin">
  <h2>Clearwater Beach â€” 5-Day Itinerary</h2>

  <h3>Age 7</h3>
  <ol>
    <li>South Beach Playground  âžœ  <a href="https://frenchysonline.com/locations/rockaway-grill/" target="_blank">Frenchyâ€™s Rockaway Grill</a>  âžœ  <a href="https://www.sunsetsatpier60.com/" target="_blank">Pier 60 Sunset Festival</a></li>
    <li><a href="https://www.cmaquarium.org/" target="_blank">Clearwater Marine Aquarium</a>  âžœ  <a href="https://captainmemo.com/" target="_blank">Captain Memo Pirate Cruise</a></li>
    <li>Ferry to <a href="https://caladesiferry.org/" target="_blank">Caladesi Island State Park</a> for shelling âžœ pool time</li>
    <li><a href="https://greatex.org/" target="_blank">Great Explorations Museum</a>  âžœ  <a href="https://seascreamer.com/" target="_blank">Sea Screamer Dolphin Cruise</a></li>
    <li>Low-tide pools at <a href="https://pinellas.gov/sand-key-park/" target="_blank">Sand Key Park</a>  âžœ  souvenir hunt</li>
  </ol>

  <h3>Age 11</h3>
  <ol>
    <li>Paddle-board lesson (<a href="https://www.clearwatersup.com/" target="_blank">Clearwater SUP Co.</a>)</li>
    <li>Behind-the-scenes tour at CMA âžœ Bike the <a href="https://rideclearwater.com/" target="_blank">Memorial Causeway Trail</a></li>
    <li>Mangrove kayak (<a href="https://www.tampabaykayaktours.com/" target="_blank">TB Kayak Tours</a>) âžœ Evening <a href="https://www.milb.com/clearwater" target="_blank">Threshers Baseball</a></li>
    <li>Art morning at <a href="https://thedali.org/" target="_blank">DalÃ­ Museum</a> & murals âžœ <a href="https://littledolphintours.com/" target="_blank">Little Toot Dolphin Tour</a></li>
    <li><a href="https://clearwaterparasail.com/" target="_blank">Parasailing Clearwater</a> âžœ depart</li>
  </ol>

  <h3>Age 14</h3>
  <ol>
    <li>Jet-ski island-hop (<a href="https://h2owatersportz.com/" target="_blank">H2O Watersports</a>) âžœ <a href="https://www.pier60fishing.com/" target="_blank">Pier 60 Fishing Clinic</a></li>
    <li>Teen volunteer shift at CMA âžœ Beach volleyball (<a href="https://www.clearwaterbeachvolleyball.com/" target="_blank">CB Courts</a>)</li>
    <li>Cycle the <a href="https://pinellascounty.org/trailgd/" target="_blank">Pinellas Trail</a> âžœ Sunset photo workshop</li>
    <li>Thrill day at <a href="https://buschgardens.com/tampa/" target="_blank">Busch Gardens Tampa</a></li>
    <li>Morning surf lesson (<a href="https://clearwatersurfschool.com/" target="_blank">Clearwater Surf School</a>) âžœ depart</li>
  </ol>
</section>

<!-- ===========  OUTER BANKS  =========== -->
<section id="obx" class="itin">
  <h2>Outer Banks â€” 5-Day Itinerary</h2>

  <h3>Age 7</h3>
  <ol>
    <li>Fly kites on <a href="https://www.ncparks.gov/jockeys-ridge-state-park/home" target="_blank">Jockeyâ€™s Ridge</a> âžœ Dinner at <a href="https://samandomies.net/" target="_blank">Sam & Omieâ€™s</a></li>
    <li>Visit <a href="https://www.nps.gov/caha/planyourvisit/ocracokeponies.htm" target="_blank">Ocracoke Pony Pens</a> âžœ Shell-painting craft</li>
    <li><a href="https://www.ncaquariums.com/roanoke-island" target="_blank">Roanoke Island Aquarium</a> âžœ Sound-side splash-pad in Manteo</li>
    <li>Mini-golf at <a href="https://mutinybayobx.com/" target="_blank">Mutiny Bay</a> âžœ Sunset sand-castle contest</li>
    <li>Hang-glide demo (<a href="https://www.kittyhawk.com/" target="_blank">Kitty Hawk Kites</a>) âžœ depart</li>
  </ol>

  <h3>Age 11</h3>
  <ol>
    <li>Climb <a href="https://www.outerbanks.org/listing/bodie-island-lighthouse/929/" target="_blank">Bodie Island Lighthouse</a></li>
    <li>Wild-horse 4Ã—4 tour (<a href="https://www.corollawildhorsetours.com/" target="_blank">Corolla Tours</a>) âžœ Beach picnic</li>
    <li>Surf lesson (<a href="https://obxsurfschool.com/" target="_blank">OBX Surf School</a>) âžœ <a href="https://www.obxghosttours.com/" target="_blank">Manteo Ghost Tour</a></li>
    <li>Kayak the <a href="https://www.fws.gov/refuge/alligator-river" target="_blank">Alligator River NWR</a> âžœ Evening SUP rental</li>
    <li><a href="https://www.nps.gov/wrbr/index.htm" target="_blank">Wright Brothers Memorial</a> interactive lab âžœ depart</li>
  </ol>

  <h3>Age 14</h3>
  <ol>
    <li>Beginner hang-gliding lesson (<a href="https://www.kittyhawk.com/adventures/hang-gliding/" target="_blank">Kitty Hawk Kites</a>)</li>
    <li>Deep-sea charter (<a href="https://www.oregon-inlet.com/" target="_blank">Oregon Inlet Fishing</a>)</li>
    <li>Dune-buggy rental (<a href="https://www.obxbuggies.com/" target="_blank">OBX Buggies</a>) âžœ Sunset photography</li>
    <li>Kitesurf clinic (<a href="https://outerbankskiteboarding.com/" target="_blank">OBX Kiteboarding</a>)</li>
    <li>Shipwreck snorkel (<a href="https://obxdivers.com/" target="_blank">OBX Divers</a>) âžœ depart</li>
  </ol>
</section>

<!-- ===========  SMOKIES  =========== -->
<section id="gsm" class="itin">
  <h2>Great Smoky Mountains â€” 5-Day Itinerary</h2>

  <h3>Age 7</h3>
  <ol>
    <li>Easy stroll to <a href="https://www.nps.gov/grsm/planyourvisit/laurel-falls.htm" target="_blank">Laurel Falls</a> âžœ Junior Ranger kit at Sugarlands</li>
    <li>Scenic drive (<a href="https://www.nps.gov/grsm/planyourvisit/roaring-fork.htm" target="_blank">Roaring Fork Motor Trail</a>) âžœ Picnic at Chimneys</li>
    <li><a href="https://www.ripleyaquariums.com/gatlinburg/" target="_blank">Ripleyâ€™s Aquarium of the Smokies</a></li>
    <li><a href="https://www.dollywood.com/" target="_blank">Dollywood</a> kiddie rides &amp; Country Fair area</li>
    <li>Ride the <a href="https://www.gatlinburgskypark.com/" target="_blank">Gatlinburg SkyLift</a> âžœ depart</li>
  </ol>

  <h3>Age 11</h3>
  <ol>
    <li>Bike the <a href="https://www.nps.gov/grsm/planyourvisit/cadescove.htm" target="_blank">Cades Cove</a> loop (car-free morning)</li>
    <li>Moderate hike to <a href="https://www.nps.gov/grsm/planyourvisit/alum-cave.htm" target="_blank">Alum Cave Bluffs</a></li>
    <li>Zipline canopy tour (<a href="https://www.climbworks.com/gatlinburg/" target="_blank">CLIMB Works</a>)</li>
    <li>Tree-top skywalk at <a href="https://anakeesta.com/" target="_blank">Anakeesta</a></li>
    <li>Horseback ride (<a href="https://smokemontridingstables.com/" target="_blank">Smokemont Stables</a>) âžœ depart</li>
  </ol>

  <h3>Age 14</h3>
  <ol>
    <li>White-water raft the Upper Pigeon (<a href="https://noc.com/trips/whitewater-rafting/fully-guided-pigeon-river/" target="_blank">NOC</a>)</li>
    <li>Sunrise trek to Mount LeConte via Alum Cave</li>
    <li>Mountain-bike the <a href="https://visitcherokeenc.com/play/fire-mountain-trails/" target="_blank">Fire Mountain Trails</a></li>
    <li><a href="https://www.gatlinburghaunts.com/" target="_blank">Gatlinburg Night Ghost Tour</a></li>
    <li>Canyoning photo session at <a href="https://www.nps.gov/grsm/planyourvisit/grotto-falls.htm" target="_blank">Grotto Falls</a> âžœ depart</li>
  </ol>
</section>

<!-- ===========  POLL OVERLAY  =========== -->
<div id="poll" class="poll">
  <h2>Vote for Your Favorite Trip</h2>
  <form id="voteForm">
    <label><input type="radio" name="trip" value="Clearwater" required> Clearwater Beach, FL</label>
    <label><input type="radio" name="trip" value="Outer Banks"> Outer Banks, NC</label>
    <label><input type="radio" name="trip" value="Smokies"> Great Smoky Mountains, TN</label>
    <button type="submit">Submit Vote</button>
  </form>
  <div id="results" style="display:none">
    <h3>Current Results</h3>
    <ul id="resultList"></ul>
    <button onclick="closePoll()">Close</button>
    <div style="margin-top:15px;padding:10px;background:#f0f0f0;border-radius:5px;color:#000">
      <strong>Share to Combine Votes:</strong>
      <input type="text" id="shareUrl" readonly style="width:90%;margin:5px 0;padding:5px">
      <button onclick="copyShareUrl()">Copy Link</button>
      <button onclick="document.getElementById('mergeUrl').style.display='block'">Merge Others</button>
      <div id="mergeUrl" style="display:none;margin-top:10px">
        <input type="text" id="otherUrl" placeholder="Paste another voter's link">
        <button onclick="mergeVotes()">Add Their Votes</button>
      </div>
      <!-- Hidden hint for admin -->
      <div style="font-size:8px;color:#999;margin-top:5px;text-align:right">
        <!-- This spells CSR upside down when rotated -->
        <span style="display:inline-block;transform:rotate(180deg)">É¹sÉ”</span>
      </div>
    </div>
    <!-- Admin Reset (hidden by default) -->
    <button id="resetBtn" onclick="resetAllVotes()" style="display:none;margin-top:10px;background:#dc3545;color:white">Reset All Votes</button>
  </div>
</div>

<!-- ===========  SCRIPTS  =========== -->
<script>
/* --- slideshow --- */
let slideIndex=1;
const slides=document.getElementsByClassName('slide'),
      dots=document.getElementsByClassName('dot');
function showSlides(n){
  if(n>slides.length)slideIndex=1;
  if(n<1)slideIndex=slides.length;
  for(let i=0;i<slides.length;i++){slides[i].style.display='none'}
  for(let i=0;i<dots.length;i++){dots[i].classList.remove('active')}
  slides[slideIndex-1].style.display='block';
  dots[slideIndex-1].classList.add('active');
}
function plusSlides(n){showSlides(slideIndex+=n)}
function currentSlide(n){showSlides(slideIndex=n)}
showSlides(slideIndex);
setInterval(()=>plusSlides(1),8000);

/* --- poll with URL-based voting --- */
function openPoll(){
  document.getElementById('poll').classList.add('active');
  loadVotesFromURL();
}
function closePoll(){document.getElementById('poll').classList.remove('active')}

const voteForm=document.getElementById('voteForm'),
      resultList=document.getElementById('resultList'),
      resultsDiv=document.getElementById('results');

// URL-based voting functions
function encodeVotes(votes){
  const str=JSON.stringify(votes);
  return btoa(str).replace(/=/g,'');
}

function decodeVotes(encoded){
  try{
    const padded=encoded+(encoded.length%4?'='.repeat(4-encoded.length%4):'');
    return JSON.parse(atob(padded));
  }catch(e){
    return {"Clearwater":0,"Outer Banks":0,"Smokies":0};
  }
}

function loadVotesFromURL(){
  const hash=window.location.hash.slice(1);
  const params=new URLSearchParams(hash);
  const voteData=params.get('v');
  
  if(voteData){
    const votes=decodeVotes(voteData);
    saveVotes(votes);
  }
}

function updateShareURL(){
  const votes=getVotes();
  const encoded=encodeVotes(votes);
  const shareUrl=`${window.location.origin}${window.location.pathname}#v=${encoded}`;
  document.getElementById('shareUrl').value=shareUrl;
  window.location.hash=`v=${encoded}`;
}

function getVotes(){
  // First check URL, then localStorage
  const hash=window.location.hash.slice(1);
  const params=new URLSearchParams(hash);
  const voteData=params.get('v');
  
  if(voteData){
    return decodeVotes(voteData);
  }
  
  return JSON.parse(localStorage.getItem('tripVotes')||
    '{"Clearwater":0,"Outer Banks":0,"Smokies":0}');
}

function saveVotes(v){
  localStorage.setItem('tripVotes',JSON.stringify(v));
  updateShareURL();
}

function renderResults(){
  const v=getVotes();
  resultList.innerHTML='';
  let total=0;
  for(const t in v){
    total+=v[t];
    const li=document.createElement('li');
    li.textContent=`${t}: ${v[t]} vote${v[t]!==1?'s':''}`;
    resultList.appendChild(li);
  }
  resultsDiv.style.display='block';
  updateShareURL();
}

voteForm.addEventListener('submit',e=>{
  e.preventDefault();
  const choice=voteForm.trip.value,
        v=getVotes();
  v[choice]++; 
  saveVotes(v); 
  renderResults();
});

// Merge votes from another URL
function mergeVotes(){
  const otherUrl=document.getElementById('otherUrl').value;
  try{
    const url=new URL(otherUrl);
    const hash=url.hash.slice(1);
    const params=new URLSearchParams(hash);
    const voteData=params.get('v');
    
    if(voteData){
      const otherVotes=decodeVotes(voteData);
      const currentVotes=getVotes();
      
      // Merge votes
      for(const trip in otherVotes){
        currentVotes[trip]=(currentVotes[trip]||0)+otherVotes[trip];
      }
      
      saveVotes(currentVotes);
      renderResults();
      alert('Votes merged successfully!');
      document.getElementById('otherUrl').value='';
    }else{
      alert('No vote data found in that link');
    }
  }catch(e){
    alert('Invalid link format');
  }
}

function copyShareUrl(){
  const input=document.getElementById('shareUrl');
  input.select();
  document.execCommand('copy');
  alert('Link copied! Share it to combine votes');
}

// Load votes if opening with a URL hash
window.addEventListener('load',()=>{
  if(window.location.hash){
    loadVotesFromURL();
  }
});

// Reset function
function resetAllVotes(){
  if(confirm('Are you sure you want to reset all votes?')){
    localStorage.removeItem('tripVotes');
    window.location.hash='';
    location.reload();
  }
}

// Admin keyboard shortcut (Ctrl+Shift+R)
document.addEventListener('keydown',(e)=>{
  if(e.ctrlKey && e.shiftKey && e.key==='R'){
    e.preventDefault();
    document.getElementById('resetBtn').style.display='block';
  }
});
</script>

<!-- Admin hint at bottom of page -->
<div style="position:fixed;bottom:5px;right:5px;font-size:10px;color:#444;opacity:0.3">
  ðŸ”„ C+S+R
</div>

</body>
</html>